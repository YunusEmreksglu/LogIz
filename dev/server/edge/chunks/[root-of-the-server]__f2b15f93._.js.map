{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["import { withAuth } from 'next-auth/middleware'\r\nimport { NextResponse } from 'next/server'\r\n\r\nexport default withAuth(\r\n  function middleware(req) {\r\n    const token = req.nextauth.token\r\n    const path = req.nextUrl.pathname\r\n    const isAuth = !!token\r\n\r\n    // Redirect authenticated users away from auth pages and landing page\r\n    if (isAuth) {\r\n      if (path === '/' || path.startsWith('/login') || path.startsWith('/register')) {\r\n        return NextResponse.redirect(new URL('/dashboard', req.url))\r\n      }\r\n    }\r\n\r\n    return NextResponse.next()\r\n  },\r\n  {\r\n    callbacks: {\r\n      authorized: ({ token, req }) => {\r\n        const path = req.nextUrl.pathname\r\n\r\n        // Public paths\r\n        if (\r\n          path === '/' ||\r\n          path.startsWith('/login') ||\r\n          path.startsWith('/register') ||\r\n          path.startsWith('/upload')\r\n        ) {\r\n          return true\r\n        }\r\n\r\n        // Require token for all other paths\r\n        return !!token\r\n      },\r\n    },\r\n  }\r\n)\r\n\r\nexport const config = {\r\n  // Matcher ignoring static files and Next.js internals\r\n  // We match everything else to ensure full protection\r\n  matcher: ['/((?!api|_next/static|_next/image|favicon.ico).*)'],\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AAAA;;;uCAEe,IAAA,8JAAQ,EACrB,SAAS,WAAW,GAAG;IACrB,MAAM,QAAQ,IAAI,QAAQ,CAAC,KAAK;IAChC,MAAM,OAAO,IAAI,OAAO,CAAC,QAAQ;IACjC,MAAM,SAAS,CAAC,CAAC;IAEjB,qEAAqE;IACrE,IAAI,QAAQ;QACV,IAAI,SAAS,OAAO,KAAK,UAAU,CAAC,aAAa,KAAK,UAAU,CAAC,cAAc;YAC7E,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,cAAc,IAAI,GAAG;QAC5D;IACF;IAEA,OAAO,gMAAY,CAAC,IAAI;AAC1B,GACA;IACE,WAAW;QACT,YAAY,CAAC,EAAE,KAAK,EAAE,GAAG,EAAE;YACzB,MAAM,OAAO,IAAI,OAAO,CAAC,QAAQ;YAEjC,eAAe;YACf,IACE,SAAS,OACT,KAAK,UAAU,CAAC,aAChB,KAAK,UAAU,CAAC,gBAChB,KAAK,UAAU,CAAC,YAChB;gBACA,OAAO;YACT;YAEA,oCAAoC;YACpC,OAAO,CAAC,CAAC;QACX;IACF;AACF;AAGK,MAAM,SAAS;IACpB,sDAAsD;IACtD,qDAAqD;IACrD,SAAS;QAAC;KAAoD;AAChE"}}]
}